#### 4.神奇的交换术：不用第三只手也能换位置！

下面是如何实现交换的，尝试解释一下原理。

```c
void Swap(int *a, int *b) {
    *a ^= *b;
    *b ^= *a;
    *a ^= *b;
}

int main() {
    int x = 10, y = 20;
    printf("Before swap: x=%d, y=%d\n", x, y);
    Swap(&x, &y);
    printf("After swap:  x=%d, y=%d\n", x, y);
    Swap(&x, &x);
    printf("After swap:  x1=%d\n", x);
    return 0;
}
```

------

| **出题人** | **张铭涛**   |
| ---------- | ------------ |
| 知识点1    | 位运算 |
| 知识点2    |   异或的数学性质 |


------

Q1.解释a和b是如何实现交换的 20%

Q2.x1的输出是多少，为什么 20%

Q3.还有哪些可以不用第三个临时变量来实现参数交换的方法 20%

Q4.按位异或运算符还有哪些使用方法，知道还有哪些位运算吗 40%

```
A1：
在 Swap 中使用了“异或运算”的性质来交换两个变量。
- 第一步：*a = *a ^ *b；
- 第二步：*b = *b ^ *a = *b ^ (*a ^ *b) = *a；
- 第三步：*a = *a ^ *b = (*a ^ *b) ^ *a = *b；
这样两个变量的值就完成了交换，而且没有使用额外的临时变量。

A2：
调用Swap(&x, &x)时，Swap函数的两个参数指向的是同一个地址。  
过程：
- 第一步：*a = *a ^ *a = 0；因为a和b指向同一个地址，所以修改*a也会修改*b，结果：*a = *b = 0
- 第二步：*b = *b ^ *a = 0 ^ 0 = 0；
- 第三步：*a = *a ^ *b = 0 ^ 0 = 0；
结果x被清零，输出：After swap:  x1=0
异或交换法的前提是 a、b 不能指向同一个地址，否则结果就是数据丢失

A3：
方法一：加减法
*a = *a + *b;
*b = *a - *b;
*a = *a - *b;

方法二：乘除法（适用于 a、b 均非零且不溢出的情况）
*a = *a * *b;
*b = *a / *b;
*a = *a / *b;

A4：
按位异或运算符的常见用途：
1. 判断两个数是否相等
   如果a ^ b == 0，则a == b。
2. 找出出现奇数次的元素  
   在一组数中，所有成对出现的数异或会抵消，最后结果就是那个只出现奇数次的数。

其他常见位运算：
1. 与(&)
    1 & 1 = 1，其余情况都是0。
2. 或(|)
    0 | 0 = 0，其余情况都是1。
3. 非(~)
    按位取反。
4. 左移(<<)
    相当于乘以2的幂：a << 4等价于a * 4。
5. 右移(>>)
    相当于除以2的幂（算术（高位补符号位）/逻辑（高位补0）右移）。
    逻辑右移一般用于无符号整数，而算术右移用于有符号整数。
```