#### 2. 可以和\0组一辈子字符串吗？

你能找到成功打印的语句吗？

你能看出每个if中函数的返回值吗？这些函数各有什么特点？

```c
int main() {
    char p1[] = {'W', 'e', 'l', 'c', 'o', 'm', 'e', '\0'};
    char p2[] = "Join us\0";
    const char *p3 = "Xiyou Linux Group\0\n2025\0";
    if(strcmp(p1, p2)){
        printf("%s to %s!\n", p1, p2);
    }
    if(sizeof(p1) == sizeof(p2)){
        printf("1:%s", p3);
    }
    if(strlen(p3) > sizeof(p3)){
        printf("2:%s", p3);
    }
    return 0;
}
```

------

| **出题人** | **王柯**   |
| ---------- | ------------ |
| 知识点1    | 字符串的存储 |
| 知识点2    | strcmp、sizeof、strlen|
| 知识点3    | 字符串结束符 \0     |
| 知识点4    | 指针变量的大小   |

------
Q1.指出哪些printf会输出，输出的是什么？ 20%

Q2.解释每个if里所有函数的返回值。 50%（每个函数的返回值占10%）

Q3.说说strcmp()、strlen()、sizeof()的内部机制。 30%（每个函数占10%）

```
A1：
第一个和第三个printf会输出，分别输出"Welcome to Join us!"和"2:Xiyou Linux Group"（需指出不输出2025）。

A2：
1. 第一个if内:
    strcmp(p1, p2)比较时两个字符串相同返回0，不同时返回非零值，为第一对不同字符ASCII码的差值，这里返回13('W'与'J'的差值)。
2. 第二个if内:
    sizeof 返回数组的大小（单位是字节），p1内为"Welcome\0"，合计8字节，p2内为"Join us\0\0"（需指出p2多的\0是字符串格式赋值自带的），合计9字节。
    所以两个sizeof分别返回8、9，故不相等，语句不输出。
3. 第三个if内:
    strlen(p3)返回第一个\0前字符串的长度，即为"Xiyou Linux Group"的长度，为17。
    sizeof(p3)返回p3这个变量的大小，p3为指针变量，在32位系统下大小为4，在64位系统下大小为8（现今大部分情况为8）。
    故17 > 4或8，第三个if为真，语句输出。

A3：
strcmp():底层机制：通过循环遍历每个字符，直到找到不同字符或遇到字符串结束符 \0。
         返回值：如果两个字符串相等，返回 0。如果不同，返回第一对不同字符ASCII码的差值。
strlen():底层机制：strlen 通过指针遍历字符串，直到遇到 \0，并返回字符数。
sizeof():底层机制：sizeof 是一个编译时运算符，直接返回指定类型的大小，不会在运行时计算。
```